# micro PASCAL for SAKI80

**micro PASCAL** は1980年にASCII誌上で丸山定信氏により製作・紹介されたプログラミング言語処理系で、標準的なPASCALをベースとした教育・開発用の環境です。Intel 8080用として開発されたため、互換CPUであるZ80が搭載されたTRS-80/MZ-80等に移植されました。これをZ80で最適化して、Super AKI-80等に移植したものが **micro PASCAL for SAKI80** です。<br> 
**micro PASCAL for SAKI80** では、プログラムの入力を簡易に確認できるよう **P/** コマンドと **UNIMON for SAKI80** に戻るためのコマンド **Q/** を追加してあります。<br>
**micro PASCAL** は、BASICと違い行番号がないため、エディタコマンドを使ってプログラムを入力していきます。シリアルターミナルで接続している場合は、Iコマンドの後プログラムリストをペーストして、**CR**キーを押しコマンド入力状態（>表示）で **P/** コマンドで全リストの入力を確認します。G/コマンドでプログラムを実行できます。<br>
アルファベット小文字の入力の際は、アルファベット大文字に変換されて入力されるようにしました。

## エディタ・システム制御コマンド

### エディタコマンド
- **Bottom (B)**: ポインタを最後の行に移動
- **Delete (Dn, D2)**: 行削除
- **Find (Fs, FPROC_A)**: 文字列検索
- **Insert (Is, I_A)**: 行挿入
- **Last (Ln, L5)**: 指定行数分上に移動
- **Next (Nn, N5)**: 指定行数分下に移動
- **Print (Pn, P)**: 行表示
- **All Print (P/)**: すべてのプログラムリストを表示して、ポインタを最後の行に移動
- **Retype (Rs, RBEGIN)**: 行を再入力
- **Top (Tn, T)**: 最初の行に移動

### システムコマンド
- **Go (G/)**: プログラム実行 (RUN)
- **Kill (K/)**: インタープリタ初期化 (NEW)
- **Return Monitor (Q/)**: UNIMONへ戻ります（QUIT）
- **Memory (M)**: ファイル領域の残りバイト数表示
- **End Memory (En, E4000)**: 使用メモリ残量を指定

## 基本文法

### 単純文
micro PASCALでは、代入文や入出力文などの基本的な構文を利用できます。変数への代入は `A := B` の形式で行います。

### 複合文
複数の文をまとめて実行する場合は、`BEGIN` と `END` で囲みます：
```pascal
BEGIN
  文1;
  文2;
  文3
END
```

### 繰り返し文
以下の種類の繰り返し構文が利用可能です：

**REPEAT文**
```pascal
REPEAT
  実行する文
UNTIL 条件
```

**WHILE文**
```pascal
WHILE 条件 DO
  実行する文
```

**FOR文**
```pascal
FOR 変数 := 初期値 TO 終了値 DO
  実行する文
```

### 条件分岐
**IF文**
```pascal
IF 条件 THEN
  実行する文
ELSE
  実行する文
```

## 変数と配列

### 変数宣言
```pascal
VAR 変数名: 型;
```

### 配列宣言
```pascal
ARRAY [下限..上限] OF 型
```

例：`ARRAY A[0],B[10],C[5]` で配列を定義

## 手続きと関数

### 手続き（PROC）
```pascal
PROC 手続き名;
BEGIN
  処理内容
END;
```

### 関数（FUNC）
```pascal
FUNC 関数名: 戻り値の型;
BEGIN
  処理内容
END;
```

## 入出力

### 入力
- `READ(変数)`: 数値入力
- 数字32767までの数値を読み込み可能

### 出力
- `WRITE(文字列|変数)`: 文字列や数値の出力
- `PUT(文字|文字列|式)`: 文字出力

## エラーコード

システムは以下のエラーコードで問題を報告します：

- **00**: 10進、16進入力に対する実行時エラー
- **01**: メモリオーバーフロー、文字列エラー
- **02**: 文字列型コメントエラー
- **03**: コンパイルエラー
- **04-14**: 各種構文エラー（"BEGIN"がない、"UNTIL"がない等）
- **15-23**: 手続きや関数に関するエラー

## 演算と式

### 算術演算子
- `+`: 加算
- `-`: 減算  
- `*`: 乗算
- `DIV`: 整数除算
- `MOD`: 余剰

### 比較演算子
- `=`: 等しい
- `<>`: 等しくない
- `<`: より小さい
- `>`: より大きい
- `<=`: 以下
- `>=`: 以上

### 論理演算子
- `AND`: 論理積
- `OR`: 論理和
- `NOT`: 論理否定

## 特徴

**micro PASCAL** は教育目的に適した簡潔な言語仕様を持ち、基本的なプログラミング概念（変数、配列、手続き、関数、制御構造）を学習するのに適していました。メモリ効率を重視した設計で、当時のマイクロコンピュータの制約下でも実用的なプログラミング環境を提供します。